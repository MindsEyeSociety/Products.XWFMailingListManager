<tal:block tal:define="post python:options['post'];
  authorId python:options['authorId']; 
  authorName python:options['authorName'];
  authorExists python:options['authorExists'];
  authored python:options['authored'];
  authorImage python:options['authorImage'];">
  <div 
    tal:define="class python:authored and 'emaildetails-self-odd' or 'emaildetails-odd'"
    tal:attributes="class class">
    
    <p class="email-metadata" 
      tal:attributes="id post/id">
      <span class="author">
        <strong>From:</strong>
        <a tal:condition="authorExists" class="name"
          tal:attributes="href string:/contacts/${authorId};
          title string:Profile of ${authorName};"
          tal:content="python:authorName">Me!</a>
        <span tal:condition="not:authorExists" class="name"
          tal:content="python:authorName">Me!</span>
        </span>
      <span class="posted">
        <strong>Date:</strong>
        <span class="date" 
          tal:content="post/mailDate">Today, Tomorrow, Timaru</span>
        </span>
      <a class="email-link"
        tal:attributes="href string:post.html?id=${post/id};"
        title="A short link to this post">Short link</a>
      </p><!--email-metadata-->
    <div tal:condition="authorImage" class="userimage">
      <a tal:attributes="href string:/contacts/${authorId}">
        <img tal:attributes="src authorImage; alt string:Photo of ${authorName}"/>
      </a>
    </div><!--authorImage-->
    <pre class="email-body"
      tal:content="post/mailBody">
      This should not be seen
    </pre><!--email-body-->
  </div><!--email-details-->
</tal:block>
