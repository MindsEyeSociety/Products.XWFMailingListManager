<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>
  	<title metal:fill-slot="title"
    	tal:define="retval view/update">Start a new topic in
      <span tal:replace="view/groupInfo/name"/>:
      <span tal:replace="view/siteInfo/name"/>
    </title>
    <tal:block metal:fill-slot="metadata">
      <link rel="up" href="#"
        tal:attributes="title view/groupInfo/name;
        href view/groupInfo/url"/>
      <link rel="bookmark" title="Group Homepage" href="#"
        tal:attributes="title string:${view/groupInfo/name} Homepage;
        href view/groupInfo/url"/>
      <link rel="home" 
        tal:attributes="title string:${view/siteInfo/name} Homepage;
        href view/siteInfo/url"/>
      <link rel="help" title="Help" href="/help"/>
    </tal:block>
  </head>
  <body>
    <!--
      - The error-messages can go in odd places, so define them seperately 
      - from the content. In addition, they can be generated by something 
      - other than the "process_form" method of the view. -->
    <div metal:fill-slot="messages"
      tal:define="result view/retval;
      isError python:result and result.has_key('error') and result['error'];"
      tal:condition="python:result and result.has_key('message')"
      tal:attributes="class python:(isError and 'message-error') or 'message-result'"
      tal:content="structure result/message"/>
    <tal:block metal:fill-slot="body">
      <h1>Start a New Topic</h1>
      <div id="posting">
        <form method="post" action=""
          enctype="multipart/form-data"
          tal:condition="view/userPostingInfo/canPost"
          tal:define="startNew python:True"
          tal:attributes="action request/URL">
      
          <p 
            tal:define="pageTemplateFileName string:browser/templates/postMessageData.pt"
            tal:replace="structure provider:groupserver.PostMessage">
            The space for the hidden metadata associated with the new post.
          </p>
          <p tal:replace="structure provider:groupserver.PostMessage">
            The space to allow people to write the new post.
          </p>
        </form><!-- Posting Form -->
        <p class="message-result"
          tal:condition="not:view/userPostingInfo/canPost"
          tal:define="statusNum view/userPostingInfo/statusNum;
            status view/userPostingInfo/status;"
          tal:content="structure provider:groupserver.UserCanPost" />
      </div><!--posting-->
    </tal:block>
  </body>
</html>

