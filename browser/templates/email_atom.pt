<entry tal:define="post python:options['post'];
  authorId python:options['authorId']; 
  authorName python:options['authorName'];
  authorExists python:options['authorExists'];
  authored python:options['authored'];
  authorImage python:options['authorImage'];
  postIntro options/postIntro;
  postRemainder options/postRemainder;
  id options/post/id">
  <title tal:content="options/topicName">Atom-Powered Robots Run Amok</title>
  <link rel="alternate" type="text/html" title="Post on the Web" 
    href="http://example.org/2003/12/13/atom03" 
    tal:attributes="title string:Post in ${options/topicName};
    href string:${options/siteURL}/r/post/${id}"/>
  <tal:block
    tal:condition="python:hasattr(post, 'x-xwfnotification-file-id')"
    tal:define="groupObj python:options['context'].Scripts.get.group_object();">
    <tal:block
      tal:repeat="fileId python:post.getProperty('x-xwfnotification-file-id', '').strip().split()">
      <tal:block 
        tal:define="fileObjs python:groupObj.files.find_files({'id': fileId});
        fileObj python:fileObjs and fileObjs[0].getObject() or None"
        tal:condition="fileObj">
        <link rel="enclosure" 
          tal:attributes="type fileObj/content_type;
          title fileObj/title_or_id;
          href string:${options/siteURL}/groups/${options/groupId}/files/f/${fileId}/${fileObj/title_or_id};
          length fileObj/size" />
      </tal:block>
    </tal:block>
  </tal:block>
  <id tal:content="string:http://onlinegroups.net/r/post/${id}">abc123</id>
  <author>
    <name tal:content="authorName">Me!</name>
    <uri tal:condition="authorExists" 
      tal:content="string:/contacts/${authorId};">http://bla/</uri>
  </author>
  <updated 
    tal:content="python:post['mailDate'].strftime('%Y-%m-%dT%H:%M:%SZ')">
    2003-12-13T18:30:02Z
  </updated>
  <content type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml">
      <pre tal:content="structure options/postIntro">
        This is the body of the message.
      </pre>
    </div>
  </content>
</entry>
